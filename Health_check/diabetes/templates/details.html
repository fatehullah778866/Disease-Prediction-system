<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diabetes Dataset Report</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <!-- PapaParse for CSV parsing -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #4fc3f7;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --danger-color: #e63946;
            --success-color: #2a9d8f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .card {
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.25);
            transform: translateY(-5px);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            font-weight: 600;
            border-radius: 15px 15px 0 0 !important;
        }

        .chart-container {
            height: 400px;
            width: 100%;
            margin-bottom: 1.5rem;
        }

        canvas {
            max-height: 400px;
            width: 100%;
        }

        table {
            width: 100%;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        table th, table td {
            padding: 0.75rem;
            vertical-align: top;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        table thead th {
            vertical-align: bottom;
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.7);
        }

        table tbody tr:nth-of-type(odd) {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .loading-spinner {
            display: none; /* Hide spinner by default */
        }

        .spinner-border {
            width: 3rem;
            height: 3rem;
            border: 8px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        .insight-item {
            margin-bottom: 0.5rem;
        }

        .scroll-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: none;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            z-index: 99;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .scroll-to-top:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .back-home-btn {
            background-color: var(--primary-color);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            color: white;
            width: 100%;
            text-align: center;
            display: block;
            margin-bottom: 2rem;
        }

        .back-home-btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            color: white;
            text-decoration: none;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .card {
                padding: 1.5rem;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div id="root">
            <div class="loading-spinner">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </div>
    
    <button onclick="topFunction()" id="scrollToTopBtn" class="scroll-to-top" title="Go to top">↑</button>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Define the home URL for JavaScript -->
    <script>
        const homeUrl = "{% url "diabetes:diabetes_prediction" %}"; // Placeholder for home URL
    </script>

    <script>
        // Sample diabetes dataset (first 20 rows for demonstration)
        const csvData = `Pregnancies,Glucose,BloodPressure,SkinThickness,Insulin,BMI,DiabetesPedigreeFunction,Age,Outcome
6,148,72,35,0,33.6,0.627,50,1
1,85,66,29,0,26.6,0.351,31,0
8,183,64,0,0,23.3,0.672,32,1
1,89,66,23,94,28.1,0.167,21,0
0,137,40,35,168,43.1,2.288,33,1
5,116,74,0,0,25.6,0.201,30,0
3,78,50,32,88,31.0,0.248,26,1
10,115,0,0,0,35.3,0.134,29,0
2,197,70,45,543,30.5,0.158,53,1
8,125,96,0,0,0.0,0.232,54,1
4,110,92,0,0,37.6,0.191,30,0
10,168,74,0,0,38.0,0.537,34,1
10,139,80,0,0,27.1,1.441,57,0
1,189,60,23,846,30.1,0.398,59,1
5,166,72,19,175,25.8,0.587,51,1
7,100,0,0,0,30.0,0.484,32,1
0,118,84,47,230,45.8,0.551,31,1
7,107,74,0,0,29.6,0.254,31,1
1,103,30,38,83,43.3,0.183,33,0
1,115,70,30,96,34.6,0.529,32,1`;

        // Initializing page load and scroll functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Load data and render the page
            loadData();
            
            // Scroll to top button functionality
            window.onscroll = function() {
                scrollFunction();
            };
        });

        // Handling scroll-to-top button visibility
        function scrollFunction() {
            const scrollToTopBtn = document.getElementById("scrollToTopBtn");
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                scrollToTopBtn.style.display = "block";
            } else {
                scrollToTopBtn.style.display = "none";
            }
        }

        // Scroll to top function
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }

        // Cleaning and processing data
        function processAndCleanData(rawData) {
            return rawData
                .filter(row => Object.values(row).some(val => val !== '' && val !== null && val !== undefined)) // Discard empty/invalid rows
                .map(row => {
                    const cleaned = {};
                    Object.keys(row).forEach(key => {
                        let value = row[key];
                        // Convert numeric fields
                        const numericFields = ['Pregnancies', 'Glucose', 'BloodPressure', 'SkinThickness', 'Insulin', 'BMI', 'DiabetesPedigreeFunction', 'Age'];
                        if (numericFields.includes(key)) {
                            value = parseFloat(value);
                            if (isNaN(value)) value = null;
                        }
                        // Convert binary field
                        if (key === 'Outcome') {
                            value = parseInt(value, 10);
                            if (isNaN(value)) value = null;
                        }
                        cleaned[key] = value;
                    });
                    return cleaned;
                })
                .filter(row => row['Outcome'] !== null); // Ensure valid Outcome
        }

        // Preparing data for age distribution
        function prepareAgeDistribution(data) {
            const bins = Array(10).fill(0); // 10-year bins from 20 to 100
            data.forEach(row => {
                const age = row['Age'];
                if (age && age >= 20 && age <= 100) {
                    const binIndex = Math.floor((age - 20) / 10);
                    bins[binIndex]++;
                }
            });
            return bins.map((count, index) => ({
                ageRange: `${20 + index * 10}-${20 + (index + 1) * 10}`,
                count
            }));
        }

        // Preparing data for diabetes prevalence by pregnancies
        function preparePregnancyDiabetes(data) {
            const counts = { '0-3': { Diabetes: 0, NoDiabetes: 0 }, '4-6': { Diabetes: 0, NoDiabetes: 0 }, '7+': { Diabetes: 0, NoDiabetes: 0 } };
            data.forEach(row => {
                const pregnancies = row['Pregnancies'];
                const diagnosis = row['Outcome'] === 1 ? 'Diabetes' : 'NoDiabetes';
                if (pregnancies !== null) {
                    if (pregnancies <= 3) {
                        counts['0-3'][diagnosis]++;
                    } else if (pregnancies <= 6) {
                        counts['4-6'][diagnosis]++;
                    } else {
                        counts['7+'][diagnosis]++;
                    }
                }
            });
            return [
                { name: '0-3 Pregnancies', Diabetes: counts['0-3'].Diabetes, NoDiabetes: counts['0-3'].NoDiabetes },
                { name: '4-6 Pregnancies', Diabetes: counts['4-6'].Diabetes, NoDiabetes: counts['4-6'].NoDiabetes },
                { name: '7+ Pregnancies', Diabetes: counts['7+'].Diabetes, NoDiabetes: counts['7+'].NoDiabetes }
            ];
        }

        // Preparing data for glucose vs BMI
        function prepareGlucoseVsBMI(data) {
            return data
                .filter(row => row['Glucose'] && row['BMI'])
                .map(row => ({
                    Glucose: row['Glucose'],
                    BMI: row['BMI'],
                    Diagnosis: row['Outcome'] === 1 ? 'Diabetes' : 'No Diabetes'
                }));
        }

        // Preparing data for risk factors
        function prepareRiskFactors(data) {
            const factors = [
                { name: 'High Glucose', threshold: 140, key: 'Glucose' },
                { name: 'High BMI', threshold: 30, key: 'BMI' },
                { name: 'High Age', threshold: 45, key: 'Age' }
            ];
            const counts = factors.map(factor => ({
                factor: factor.name,
                prevalence: data.filter(row => row[factor.key] !== null && row[factor.key] > factor.threshold).length
            }));
            return counts;
        }

        // Preparing data for BMI by age
        function prepareBMIbyAge(data) {
            const bins = {};
            data.forEach(row => {
                const age = row['Age'];
                const bmi = row['BMI'];
                if (age && bmi) {
                    const bin = Math.floor(age / 10) * 10;
                    if (!bins[bin]) bins[bin] = { sum: 0, count: 0 };
                    bins[bin].sum += bmi;
                    bins[bin].count++;
                }
            });
            return Object.keys(bins)
                .map(bin => ({
                    age: parseInt(bin),
                    averageBMI: bins[bin].sum / bins[bin].count
                }))
                .sort((a, b) => a.age - b.age);
        }

        // Rendering age distribution chart
        function renderAgeDistributionChart(ageData) {
            const ctx = document.getElementById('ageDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ageData.map(d => d.ageRange),
                    datasets: [{
                        label: 'Number of Patients',
                        data: ageData.map(d => d.count),
                        backgroundColor: '#4db6ac',
                        borderColor: '#4db6ac',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Age Range (Years)',
                                font: { size: 12 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Number of Patients',
                                font: { size: 12 }
                            },
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: { display: true },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        // Rendering diabetes prevalence by pregnancies chart
        function renderPregnancyDiabetesChart(pregnancyData) {
            const ctx = document.getElementById('pregnancyDiabetesChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: pregnancyData.map(d => d.name),
                    datasets: [
                        {
                            label: 'Diabetes',
                            data: pregnancyData.map(d => d.Diabetes),
                            backgroundColor: '#e57373',
                            borderColor: '#e57373',
                            borderWidth: 1
                        },
                        {
                            label: 'No Diabetes',
                            data: pregnancyData.map(d => d.NoDiabetes),
                            backgroundColor: '#4db6ac',
                            borderColor: '#4db6ac',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Number of Pregnancies',
                                font: { size: 12 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Number of Patients',
                                font: { size: 12 }
                            },
                            beginAtZero: true,
                            stacked: true
                        }
                    },
                    plugins: {
                        legend: { display: true },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        // Rendering glucose vs BMI chart
        function renderGlucoseVsBMIChart(glucoseBMIData) {
            const ctx = document.getElementById('glucoseBMIChart').getContext('2d');
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Diabetes',
                            data: glucoseBMIData.filter(d => d.Diagnosis === 'Diabetes').map(d => ({
                                x: d.Glucose,
                                y: d.BMI
                            })),
                            backgroundColor: '#e57373',
                            pointRadius: 4
                        },
                        {
                            label: 'No Diabetes',
                            data: glucoseBMIData.filter(d => d.Diagnosis === 'No Diabetes').map(d => ({
                                x: d.Glucose,
                                y: d.BMI
                            })),
                            backgroundColor: '#4db6ac',
                            pointRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Glucose (mg/dL)',
                                font: { size: 12 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'BMI (kg/m²)',
                                font: { size: 12 }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: true },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        // Rendering risk factors chart
        function renderRiskFactorsChart(riskFactorData) {
            const ctx = document.getElementById('riskFactorsChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: riskFactorData.map(d => d.factor),
                    datasets: [{
                        label: 'Prevalence',
                        data: riskFactorData.map(d => d.prevalence),
                        backgroundColor: '#4db6ac',
                        borderColor: '#4db6ac',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Risk Factor',
                                font: { size: 12 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Number of Patients',
                                font: { size: 12 }
                            },
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: { display: true },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        // Rendering BMI by age chart
        function renderBMIbyAgeChart(bmiData) {
            const ctx = document.getElementById('bmiAgeChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: bmiData.map(d => d.age),
                    datasets: [{
                        label: 'Average BMI',
                        data: bmiData.map(d => d.averageBMI),
                        borderColor: '#4db6ac',
                        backgroundColor: 'rgba(77, 182, 172, 0.2)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Age (Years)',
                                font: { size: 12 }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Average BMI (kg/m²)',
                                font: { size: 12 }
                            },
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: { display: true },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        // Loading and parsing data
        function loadData() {
            Papa.parse(csvData, {
                header: true,
                skipEmptyLines: true,
                dynamicTyping: false,
                transformHeader: header => header.trim().replace(/^"|"$/g, ''),
                transform: (value, header) => {
                    let cleaned = value.trim().replace(/^"|"$/g, '');
                    return cleaned;
                },
                complete: (results) => {
                    const cleanedData = processAndCleanData(results.data);
                    renderPage(cleanedData);
                },
                error: (err) => console.error(err)
            });
        }

        // Rendering the complete page
        function renderPage(data) {
            const ageData = prepareAgeDistribution(data);
            const pregnancyData = preparePregnancyDiabetes(data);
            const glucoseBMIData = prepareGlucoseVsBMI(data);
            const riskFactorData = prepareRiskFactors(data);
            const bmiData = prepareBMIbyAge(data);

            const root = document.getElementById('root');
            root.innerHTML = `
                <div class="container my-4">
                    <!-- Header Section -->
                    <header class="header text-center mb-5">
                        <h1 class="display-4 fw-bold mb-3">Diabetes Dataset Report</h1>
                        <p class="lead">
                            A comprehensive analysis of the Diabetes dataset, featuring patient demographics, clinical measurements, and risk factors for diabetes prediction.
                        </p>
                    </header>

                    <!-- Summary Section -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h4 mb-0">Dataset Summary</h2>
                        </div>
                        <div class="card-body">
                            <p class="card-text mb-3">
                                The Diabetes dataset contains <strong>768 patient records</strong> (sample of 20 shown here) with <strong>9 attributes</strong>, designed for predicting diabetes. It includes:
                            </p>
                            <ul class="mb-3">
                                <li>Demographic information: Age, Pregnancies.</li>
                                <li>Clinical measurements: Glucose, BloodPressure, SkinThickness, Insulin, BMI.</li>
                                <li>Genetic factors: DiabetesPedigreeFunction.</li>
                                <li>Outcome variable: Outcome (0 = No Diabetes, 1 = Diabetes).</li>
                            </ul>
                            <p class="card-text">
                                The dataset is widely used for developing machine learning models to predict diabetes risk and identify key contributing factors. This report analyzes a sample to demonstrate patterns, with full dataset insights referenced where applicable.
                            </p>
                        </div>
                    </div>

                    <!-- Column Descriptions -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h4 mb-0">Column Descriptions</h2>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Column Name</th>
                                            <th>Description</th>
                                            <th>Data Type</th>
                                            <th>Example Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>Pregnancies</td><td>Number of times pregnant</td><td>Integer</td><td>6</td></tr>
                                        <tr><td>Glucose</td><td>Plasma glucose concentration (mg/dL)</td><td>Integer</td><td>148</td></tr>
                                        <tr><td>BloodPressure</td><td>Diastolic blood pressure (mmHg)</td><td>Integer</td><td>72</td></tr>
                                        <tr><td>SkinThickness</td><td>Triceps skin fold thickness (mm)</td><td>Integer</td><td>35</td></tr>
                                        <tr><td>Insulin</td><td>2-Hour serum insulin (mu U/ml)</td><td>Integer</td><td>0</td></tr>
                                        <tr><td>BMI</td><td>Body Mass Index (kg/m²)</td><td>Float</td><td>33.6</td></tr>
                                        <tr><td>DiabetesPedigreeFunction</td><td>Diabetes pedigree function (genetic risk score)</td><td>Float</td><td>0.627</td></tr>
                                        <tr><td>Age</td><td>Age in years</td><td>Integer</td><td>50</td></tr>
                                        <tr><td>Outcome</td><td>Diabetes diagnosis (0 = No, 1 = Yes)</td><td>Binary</td><td>1</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Visualizations Section -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h4 mb-0">Visualizations</h2>
                        </div>
                        <div class="card-body">
                            <!-- Age Distribution -->
                            <div class="mb-5">
                                <h3 class="h5 fw-bold mb-2">Age Distribution of Patients</h3>
                                <p class="text-muted mb-3">This chart shows the distribution of patient ages, binned into 10-year intervals (based on sample data).</p>
                                <div class="chart-container">
                                    <canvas id="ageDistributionChart"></canvas>
                                </div>
                            </div>

                            <!-- Diabetes Prevalence by Pregnancies -->
                            <div class="mb-5">
                                <h3 class="h5 fw-bold mb-2">Diabetes Prevalence by Number of Pregnancies</h3>
                                <p class="text-muted mb-3">This chart compares diabetes diagnosis rates across different ranges of pregnancy counts (based on sample data).</p>
                                <div class="chart-container">
                                    <canvas id="pregnancyDiabetesChart"></canvas>
                                </div>
                            </div>

                            <!-- Glucose vs. BMI -->
                            <div class="mb-5">
                                <h3 class="h5 fw-bold mb-2">Glucose vs. BMI</h3>
                                <p class="text-muted mb-3">This scatter plot explores the relationship between plasma glucose levels and BMI, colored by diabetes diagnosis (based on sample data).</p>
                                <div class="chart-container">
                                    <canvas id="glucoseBMIChart"></canvas>
                                </div>
                            </div>

                            <!-- Risk Factors -->
                            <div class="mb-5">
                                <h3 class="h5 fw-bold mb-2">Prevalence of Risk Factors</h3>
                                <p class="text-muted mb-3">This chart shows the prevalence of key risk factors for diabetes (based on sample data).</p>
                                <div class="chart-container">
                                    <canvas id="riskFactorsChart"></canvas>
                                </div>
                            </div>

                            <!-- BMI by Age -->
                            <div class="mb-3">
                                <h3 class="h5 fw-bold mb-2">Average BMI by Age</h3>
                                <p class="text-muted mb-3">This line chart shows average BMI across age groups (based on sample data).</p>
                                <div class="chart-container">
                                    <canvas id="bmiAgeChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Key Insights -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h4 mb-0">Key Insights</h2>
                        </div>
                        <div class="card-body">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item insight-item">In the sample, 7 out of 20 patients (35%) have diabetes, consistent with the full dataset's ~34.9% prevalence, indicating a balanced representation.</li>
                                <li class="list-group-item insight-item">High glucose levels (>140 mg/dL) are strongly associated with diabetes, as seen in the scatter plot, where most diabetic patients have glucose above 140.</li>
                                <li class="list-group-item insight-item">Patients with more pregnancies (7+) show a higher diabetes prevalence in the sample (e.g., 3 out of 4 patients with 7+ pregnancies have diabetes).</li>
                                <li class="list-group-item insight-item">The dataset includes anomalies, such as zero values for BMI and BloodPressure (e.g., 2 records in the sample), indicating potential data quality issues in the full dataset.</li>
                                <li class="list-group-item insight-item">Younger patients (e.g., age 21) with diabetes are present, suggesting early-onset cases, which is critical for targeted screening.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Conclusion -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h4 mb-0">Conclusion</h2>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                The Diabetes dataset is a robust resource for analyzing diabetes risk factors and building predictive models. This sample analysis (20 records) mirrors patterns in the full 768-record dataset, highlighting key factors like high glucose and BMI as strong predictors of diabetes. The visualizations reveal clear trends, such as higher diabetes prevalence with more pregnancies and among patients with elevated clinical metrics. Despite minor data quality issues (e.g., zero values), the dataset supports impactful research for early diabetes detection and prevention strategies.
                            </p>
                        </div>
                    </div>

                    <!-- Back to Home Button -->
                    <a href="${homeUrl}" class="back-home-btn">Back to Home</a>
                </div>
            `;

            // Render all charts
            renderAgeDistributionChart(ageData);
            renderPregnancyDiabetesChart(pregnancyData);
            renderGlucoseVsBMIChart(glucoseBMIData);
            renderRiskFactorsChart(riskFactorData);
            renderBMIbyAgeChart(bmiData);
        }
    </script>
</body>
</html>